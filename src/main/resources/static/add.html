<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加成绩</title>
    <link rel="stylesheet" href="css/layui.css">
</head>
<body>
<a href="/">返回首页</a>
<form action="" onsubmit="return false">
    学号：<input type="text" placeholder="请输入学号" id="sno">
    第
    <select name="no" id="no">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
    </select>
    次成绩为：<input type="text" placeholder="请输入成绩（0-10）" id="score">
    <button id="submitBtn">添加</button>
</form>
<table class="layui-hide" id="box" lay-filter="demo"></table></div>

<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script src="js/layui.js" charset="utf-8"></script>
<script>
    layui.use('table', function() {
        var table = layui.table;
        table.render({
            elem: '#box',
            id: 'all'
            , url: '/all'
            , cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            , cols: [[
                {field: 'sno', title: '学号'}
                ,{field: 'name', title: '姓名'}
                ,{field: 'clazz', title: '班级'}
                ,{field:'s1', title:'作业1'}
                ,{field:'s2', title:'作业2'}
                ,{field:'s3', title:'作业3'}
                ,{field:'s4', title:'作业4'}
                ,{field:'s5', title:'作业5'}
                ,{field:'s6', title:'作业6'}
                ,{field:'s7', title:'作业7'}
                ,{field:'s8', title:'作业8'}
                ,{field:'s9', title:'作业9'}
                ,{field:'s10', title:'作业10'}
                ,{field:'total', title:'总成绩'}
            ]]
        });

        $('#submitBtn').click(function() {

            var $parentNode = $(this).parent();
            var $sno = $parentNode.find('#sno');
            var $no = $parentNode.find('#no');
            var $score = $parentNode.find('#score');

            $.ajax({
                url: "/updateInfo?sno=" + $sno.val() + "&no=" + $no.val() + "&score=" + $score.val(),
                success: function () {
                    table.reload('all')
                }
            })

        });

    });
</script>
</body>
</html>